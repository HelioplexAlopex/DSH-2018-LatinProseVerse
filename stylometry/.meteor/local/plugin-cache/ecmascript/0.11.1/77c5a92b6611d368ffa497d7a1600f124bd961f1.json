{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/jeff/stylometry/imports/ui/pages/sresults.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/ui/pages/sresults.js","filename":"/home/jeff/stylometry/imports/ui/pages/sresults.js","passPerPreset":false,"envName":"development","cwd":"/home/jeff/stylometry","root":"/home/jeff/stylometry","generatorOpts":{"filename":"/home/jeff/stylometry/imports/ui/pages/sresults.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/sresults.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nmodule.watch(require(\"./sresults.html\"));\nvar csv;\nmodule.watch(require(\"to-csv\"), {\n  \"default\": function (v) {\n    csv = v;\n  }\n}, 0);\nvar allF = [{\n  name: \"Personal Pronouns\",\n  feature: \"p1\"\n}, {\n  name: \"Demonstrative Pronouns\",\n  feature: \"p2\"\n}, {\n  name: \"Quidam\",\n  feature: \"p3\"\n}, {\n  name: \"Reflexive Pronouns\",\n  feature: \"p4\"\n}, {\n  name: \"Iste\",\n  feature: \"p5\"\n}, {\n  name: \"Alius\",\n  feature: \"n1\"\n}, {\n  name: \"Ipse\",\n  feature: \"n2\"\n}, {\n  name: \"Idem\",\n  feature: \"n3\"\n}, {\n  name: \"Priusquam\",\n  feature: \"s6\"\n}, {\n  name: \"Antequam\",\n  feature: \"s5\"\n}, {\n  name: \"Quominus\",\n  feature: \"s4\"\n}, {\n  name: \"Dum\",\n  feature: \"s7\"\n}, {\n  name: \"Quin\",\n  feature: \"s3\"\n}, {\n  name: \"Ut\",\n  feature: \"m4\"\n}, {\n  name: \"Conditionals\",\n  feature: \"s1\"\n}, {\n  name: \"Prepositions\",\n  feature: \"m7\"\n}, {\n  name: \"Conjunctions\",\n  feature: \"c1\"\n}, {\n  name: \"Atque + consonant\",\n  feature: \"c2\"\n}, {\n  name: \"Cum\",\n  feature: \"s2\"\n}, {\n  name: \"Relative Clauses\",\n  feature: \"s8\"\n}, {\n  name: \"Mean Length Relative Clauses\",\n  feature: \"s9\"\n}, {\n  name: \"Interrogative Sentences\",\n  feature: \"m1\"\n}, {\n  name: \"Vocatives\",\n  feature: \"m2\"\n}, {\n  name: \"Superlatives\",\n  feature: \"m3\"\n}, {\n  name: \"Gerunds and Gerundives\",\n  feature: \"m5\"\n}, {\n  name: \"Mean Sentence Length\",\n  feature: \"m6\"\n}, {\n  name: \"Top 5 Ngrams\",\n  feature: \"m8\"\n}];\nvar nameObject = {\n  name: \"Corpus Name\",\n  sentences: \"Sentences\",\n  words: \"Words\",\n  characters: \"Characters\",\n  p1: \"Personal Pronouns\",\n  p2: \"Demonstrative Pronouns\",\n  p3: \"Quidam\",\n  p4: \"Reflexive Pronouns\",\n  p5: \"Iste\",\n  n1: \"Alius\",\n  n2: \"Ipse\",\n  n3: \"Idem\",\n  s6: \"Priusquam\",\n  s5: \"Antequam\",\n  s4: \"Quominus\",\n  s7: \"Dum\",\n  s3: \"Quin\",\n  m4: \"Ut\",\n  s1: \"Conditionals\",\n  m7: \"Prepositions\",\n  c1: \"Conjunctions\",\n  c2: \"Atque + consonant\",\n  s2: \"Cum\",\n  s8: \"Relative Clauses\",\n  s9: \"Mean Length Relative Clauses\",\n  m1: \"Interrogative Sentences\",\n  m2: \"Vocatives\",\n  m3: \"Superlatives\",\n  m5: \"Gerunds and Gerundives\",\n  m6: \"Mean Sentence Length\",\n  m8: \"Top 5 Ngrams\"\n};\n\nvar renameObject = function (o) {\n  return Object.assign.apply(Object, (0, _toConsumableArray2.default)(Object.keys(o).map(function (k) {\n    var _ref;\n\n    return _ref = {}, _ref[nameObject[k] || k] = o[k], _ref;\n  })));\n};\n\nvar hexToRGB = function (hex, alpha) {\n  var r = parseInt(hex.slice(1, 3), 16),\n      g = parseInt(hex.slice(3, 5), 16),\n      b = parseInt(hex.slice(5, 7), 16);\n\n  if (alpha) {\n    return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n  } else {\n    return \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n  }\n};\n\nvar htmlLabels = function () {\n  var dy = [];\n  var featureLength = allF.length;\n  var featureArray = Session.get(\"features\");\n\n  for (var i = 0; i < fl; i++) {\n    var _col = {};\n\n    if (farray.includes(allF[i].feature)) {\n      _col.header = allF[i].name;\n      _col.description = allF[i].name;\n      _col.feature = allF[i].feature;\n      dy.push(_col);\n    }\n  }\n\n  return dy;\n};\n\nvar scatterColors = [\"#702c39\", \"#b7c1c3\", \"#702c39\", \"#868e96\", \"#6610f2\"];\n\nvar generateCompareData = function (data) {\n  var results = Session.get(\"styloresult\");\n  var feature1 = data[0];\n  var feature2 = data[1];\n  var sData = [];\n\n  for (var i = 0; i < results.length; i++) {\n    var _col2 = {};\n    _col2.label = results[i].name;\n    _col2.backgroundColor = hexToRGB(scatterColors[i], 0.85);\n    _col2.data = [{\n      x: results[i][feature1],\n      y: results[i][feature2],\n      r: 10\n    }];\n    _col2.hoverBackgroundColor = \"#007bff\";\n    sData.push(_col2);\n  }\n\n  return sData;\n};\n\nvar generateScatterChart = function (element, data) {\n  var mychart = document.getElementById(\"scatterChart\").getContext(\"2d\");\n  var bbdata = {\n    datasets: data\n  };\n  module.dynamicImport(\"chart.js\").then(function (_ref2) {\n    var Chart = _ref2.default;\n    new Chart(mychart, {\n      type: \"bubble\",\n      data: bbdata,\n      options: {\n        maintainAspectRatio: false,\n        scales: {\n          xAxes: [{\n            display: true,\n            scaleLabel: {\n              labelString: Session.get(\"compareLabels\")[1],\n              display: true\n            },\n            ticks: {\n              beginAtZero: true\n            }\n          }],\n          yAxes: [{\n            display: true,\n            scaleLabel: {\n              labelString: Session.get(\"compareLabels\")[0],\n              display: true\n            },\n            ticks: {\n              beginAtZero: true,\n              steps: 0.1,\n              stepValue: 0.05\n            }\n          }]\n        }\n      }\n    });\n  });\n};\n\nTemplate.sresults.events({\n  \"click #graphs\": function (event) {\n    event.preventDefault();\n    var controller = Iron.controller();\n    controller.render(\"stylometrygraph\", {\n      to: \"stylooption\"\n    });\n    $(\"#graphs\").hide();\n    $(\"#table\").show();\n  },\n  \"click .saveResult\": function (event) {\n    $(\"#exportModal\").modal({\n      backdrop: \"static\",\n      keyboard: false\n    });\n  },\n  \"click #closeExportModal\": function (event) {\n    document.getElementById(\"saveResultForm\").reset();\n    $(\"#exportModal\").modal(\"hide\");\n  },\n  \"click #exportResult\": function (event, template) {\n    event.preventDefault();\n    var target = event.target;\n    var fileName = $(\"#fileName\").val();\n    var analysisResults = Session.get(\"styloresult\");\n    var data = analysisResults.map(renameObject);\n    var csvString = csv(data);\n\n    if (window.navigator.msSaveOrOpenBlob) {\n      var blob = new Blob([csvString]);\n      window.navigator.msSaveOrOpenBlob(blob, fileName + \".csv\");\n    } else {\n      var a = document.createElement(\"a\");\n      a.href = \"data:attachment/csv,\" + encodeURIComponent(csvString);\n      a.target = \"_blank\";\n      a.download = fileName + \".csv\";\n      document.body.appendChild(a);\n      a.click();\n    }\n\n    document.getElementById(\"saveResultForm\").reset();\n    $(\"#exportModal\").modal(\"hide\");\n  },\n  \"click #table\": function (event) {\n    event.preventDefault();\n    var controller = Iron.controller();\n    controller.render(\"stylometrytable\", {\n      to: \"stylooption\"\n    });\n    $(\"#table\").hide();\n    $(\"#graphs\").show();\n  },\n  \"click #compare\": function (event) {\n    event.preventDefault();\n    var controller = Iron.controller();\n    controller.render(\"compareFeatures\", {\n      to: \"stylooption\"\n    });\n    $(\"#table\").show();\n  },\n  \"click .newsearch\": function (event, template) {\n    Session.set(\"styloresult\", null);\n    $(\"#stable\").empty();\n    Router.go(\"/stylometry\");\n  }\n});\nTemplate.compareFeatures.events({\n  \"submit #compareFeaturesForm\": function (event, template) {\n    event.preventDefault();\n    var target = event.target;\n    var selectedFeatures = [];\n    var frequencyLength = allF.length;\n    selectedFeatures.push(target.feature1.value);\n    selectedFeatures.push(target.feature2.value);\n    $(\"#compareSelect\").hide();\n    $(\"#compareView\").show();\n    var compareNames = [];\n\n    for (var b = 0; b < frequencyLength; b++) {\n      if (selectedFeatures.includes(allF[b].feature)) {\n        compareNames.push(allF[b].name);\n      }\n    }\n\n    Session.set(\"compareLabels\", compareNames);\n    var compareData = generateCompareData(selectedFeatures);\n    generateScatterChart(\"#scatterChart\", compareData);\n  }\n});\nTemplate.compareFeatures.onRendered(function () {\n  $(\".select2\").select2({\n    minimumResultsForSearch: 2,\n    width: \"100%\",\n    placeholder: \"Select Feature\",\n    matcher: function (term, text) {\n      return text.toUpperCase().indexOf(term.toUpperCase()) == 0;\n    }\n  });\n  $(\".select2[name=feature1]\").on(\"change\", function (e) {\n    var thisVal = $(this).val();\n    $(\".select2[name=feature2] option\").each(function () {\n      if (thisVal == $(this).attr(\"value\")) {\n        $(this).attr(\"disabled\", \"disabled\");\n      } else {\n        $(this).removeAttr(\"disabled\");\n      }\n    });\n  });\n  $(\".select2[name=feature2]\").on(\"change\", function (e) {\n    var thisVal = $(this).val();\n    $(\".select2[name=feature1] option\").each(function () {\n      if (thisVal == $(this).attr(\"value\")) {\n        $(this).attr(\"disabled\", \"disabled\");\n      } else {\n        $(this).removeAttr(\"disabled\");\n      }\n    });\n  });\n});\nTemplate.stylometrygraph.onRendered(function () {\n  $(\".toplevel\").fadeIn(\"slow\");\n  var featureArray = Session.get(\"features\");\n  var data = Session.get(\"styloresult\");\n  var cdata = data;\n  var f1label = cdata.map(function (x) {\n    return x.name;\n  });\n  var fl = allF.length;\n\n  var generateData = function (feature) {\n    var dydata = cdata.map(function (x) {\n      return x[feature];\n    });\n    var bdata = [];\n\n    for (var i = 0; i < cdata.length; i++) {\n      var _col3 = {};\n      _col3.label = cdata[i].name;\n      _col3.data = [dydata[i]];\n      _col3.fill = true;\n      _col3.borderWidth = 2;\n      _col3.backgroundColor = \"rgba(112,44,57,0.4)\";\n      _col3.borderColor = \"#702c39\";\n      bdata.push(_col3);\n    }\n\n    return bdata;\n  };\n\n  var dynamicCharts = [];\n\n  for (var b = 0; b < fl; b++) {\n    var ch = {};\n\n    if (farray.includes(allF[b].feature)) {\n      ch.data = allF[b].feature;\n      ch.title = allF[b].name;\n      dynamicCharts.push(ch);\n    }\n  }\n\n  farray.forEach(function (x) {\n    generateBarChart(\"#\" + x, f1label, generateData(x));\n  });\n\n  function generateBarChart(element, labels, data) {\n    var mychart = $(element);\n    var bbdata = {\n      labels: labels,\n      datasets: data\n    };\n    module.dynamicImport(\"chart.js\").then(function (_ref3) {\n      var Chart = _ref3.default;\n      new Chart(mychart, {\n        type: \"bar\",\n        data: bbdata,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            xAxes: [{\n              barPercentage: 0.4,\n              categoryPercentage: 1\n            }],\n            yAxes: [{\n              ticks: {\n                beginAtZero: true\n              }\n            }]\n          },\n          legend: {\n            display: false\n          },\n          tooltips: {\n            callbacks: {\n              title: function () {}\n            }\n          }\n        }\n      });\n    });\n  }\n});\nTemplate.stylometrytable.onRendered(function () {\n  $(\".toplevel\").fadeIn(\"slow\");\n  var farray = Session.get(\"features\");\n  var dynamicColumns = [{\n    data: \"name\",\n    title: \"Corpus\"\n  }, {\n    data: \"words\",\n    title: \"Words\"\n  }, {\n    data: \"characters\",\n    title: \"Characters\"\n  }];\n  var fl = allF.length;\n\n  for (var i = 0; i < fl; i++) {\n    var _col4 = {};\n\n    if (farray.includes(allF[i].feature)) {\n      _col4.data = allF[i].feature;\n      _col4.title = allF[i].name;\n      dynamicColumns.push(_col4);\n    }\n  }\n\n  var data = Session.get(\"styloresult\");\n  var cdata = data;\n  var container = document.getElementById(\"stable\");\n  module.dynamicImport(\"../hands.js\").then(function (_ref4) {\n    var Handsontable = _ref4.default;\n    var hot_init = new Handsontable(container, {\n      data: data,\n      columns: dynamicColumns,\n      rowHeaders: true,\n      fixedColumnsLeft: 2,\n      columnSorting: true,\n      stretchH: \"all\"\n    });\n  });\n});\nTemplate.stylometrygraph.helpers({\n  nocharts: function () {\n    return htmlLabels();\n  }\n});\nTemplate.compareFeatures.helpers({\n  comparefeatures: function () {\n    var col = [];\n    var frequencyLength = allF.length;\n    var carray = Session.get(\"features\");\n\n    for (var i = 0; i < frequencyLength; i++) {\n      var select = {};\n\n      if (carray.includes(allF[i].feature)) {\n        select.value = allF[i].feature;\n        select.name = allF[i].name;\n        col.push(select);\n      }\n    }\n\n    return col;\n  }\n});","map":{"version":3,"sources":["imports/ui/pages/sresults.js"],"names":["module","watch","require","csv","v","allF","name","feature","nameObject","sentences","words","characters","p1","p2","p3","p4","p5","n1","n2","n3","s6","s5","s4","s7","s3","m4","s1","m7","c1","c2","s2","s8","s9","m1","m2","m3","m5","m6","m8","renameObject","o","Object","assign","keys","map","k","hexToRGB","hex","alpha","r","parseInt","slice","g","b","htmlLabels","dy","featureLength","length","featureArray","Session","get","i","fl","col","farray","includes","header","description","push","scatterColors","generateCompareData","data","results","feature1","feature2","sData","label","backgroundColor","x","y","hoverBackgroundColor","generateScatterChart","element","mychart","document","getElementById","getContext","bbdata","datasets","then","Chart","default","type","options","maintainAspectRatio","scales","xAxes","display","scaleLabel","labelString","ticks","beginAtZero","yAxes","steps","stepValue","Template","sresults","events","event","preventDefault","controller","Iron","render","to","$","hide","show","modal","backdrop","keyboard","reset","template","target","fileName","val","analysisResults","csvString","window","navigator","msSaveOrOpenBlob","blob","Blob","a","createElement","href","encodeURIComponent","download","body","appendChild","click","set","empty","Router","go","compareFeatures","selectedFeatures","frequencyLength","value","compareNames","compareData","onRendered","select2","minimumResultsForSearch","width","placeholder","matcher","term","text","toUpperCase","indexOf","on","e","thisVal","each","attr","removeAttr","stylometrygraph","fadeIn","cdata","f1label","generateData","dydata","bdata","fill","borderWidth","borderColor","dynamicCharts","ch","title","forEach","generateBarChart","labels","responsive","barPercentage","categoryPercentage","legend","tooltips","callbacks","stylometrytable","dynamicColumns","container","Handsontable","hot_init","columns","rowHeaders","fixedColumnsLeft","columnSorting","stretchH","helpers","nocharts","comparefeatures","carray","select"],"mappings":"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","sourcesContent":["import \"./sresults.html\";\nimport csv from \"to-csv\";\n\nconst allF = [\n  {name: \"Personal Pronouns\", feature: \"p1\"},\n  {name: \"Demonstrative Pronouns\", feature: \"p2\"},\n  {name: \"Quidam\", feature: \"p3\"},\n  {name: \"Reflexive Pronouns\", feature: \"p4\"},\n  {name: \"Iste\", feature: \"p5\"},\n  {name: \"Alius\", feature: \"n1\"},\n  {name: \"Ipse\", feature: \"n2\"},\n  {name: \"Idem\", feature: \"n3\"},\n  {name: \"Priusquam\", feature: \"s6\"},\n  {name: \"Antequam\", feature: \"s5\"},\n  {name: \"Quominus\", feature: \"s4\"},\n  {name: \"Dum\", feature: \"s7\"},\n  {name: \"Quin\", feature: \"s3\"},\n  {name: \"Ut\", feature: \"m4\"},\n  {name: \"Conditionals\", feature: \"s1\"},\n  {name: \"Prepositions\", feature: \"m7\"},\n  {name: \"Conjunctions\", feature: \"c1\"},\n  {name: \"Atque + consonant\", feature: \"c2\"},\n  {name: \"Cum\", feature: \"s2\"},\n  {name: \"Relative Clauses\", feature: \"s8\"},\n  {name: \"Mean Length Relative Clauses\", feature: \"s9\"},\n  {name: \"Interrogative Sentences\", feature: \"m1\"},\n  {name: \"Vocatives\", feature: \"m2\"},\n  {name: \"Superlatives\", feature: \"m3\"},\n  {name: \"Gerunds and Gerundives\", feature: \"m5\"},\n  {name: \"Mean Sentence Length\", feature: \"m6\"},\n  {name: \"Top 5 Ngrams\", feature: \"m8\"}\n];\n\nconst nameObject = {\n  name: \"Corpus Name\",\n  sentences: \"Sentences\",\n  words: \"Words\",\n  characters: \"Characters\",\n  p1: \"Personal Pronouns\",\n  p2: \"Demonstrative Pronouns\",\n  p3: \"Quidam\",\n  p4: \"Reflexive Pronouns\",\n  p5: \"Iste\",\n  n1: \"Alius\",\n  n2: \"Ipse\",\n  n3: \"Idem\",\n  s6: \"Priusquam\",\n  s5: \"Antequam\",\n  s4: \"Quominus\",\n  s7: \"Dum\",\n  s3: \"Quin\",\n  m4: \"Ut\",\n  s1: \"Conditionals\",\n  m7: \"Prepositions\",\n  c1: \"Conjunctions\",\n  c2: \"Atque + consonant\",\n  s2: \"Cum\",\n  s8: \"Relative Clauses\",\n  s9: \"Mean Length Relative Clauses\",\n  m1: \"Interrogative Sentences\",\n  m2: \"Vocatives\",\n  m3: \"Superlatives\",\n  m5: \"Gerunds and Gerundives\",\n  m6: \"Mean Sentence Length\",\n  m8: \"Top 5 Ngrams\"\n};\n\nconst renameObject = (o) =>\n  Object.assign(...Object.keys(o).map((k) => ({[nameObject[k] || k]: o[k]})));\n\nconst hexToRGB = (hex, alpha) => {\n  const r = parseInt(hex.slice(1, 3), 16),\n    g = parseInt(hex.slice(3, 5), 16),\n    b = parseInt(hex.slice(5, 7), 16);\n\n  if (alpha) {\n    return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n  } else {\n    return \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n  }\n};\n\nconst htmlLabels = () => {\n  let dy = [];\n  const featureLength = allF.length;\n  const featureArray = Session.get(\"features\");\n  for (let i = 0; i < fl; i++) {\n    let col = {};\n    if (farray.includes(allF[i].feature)) {\n      col.header = allF[i].name;\n      col.description = allF[i].name;\n      col.feature = allF[i].feature;\n      dy.push(col);\n    }\n  }\n  return dy;\n};\n\nconst scatterColors = [\"#702c39\", \"#b7c1c3\", \"#702c39\", \"#868e96\", \"#6610f2\"];\n\nconst generateCompareData = (data) => {\n  const results = Session.get(\"styloresult\");\n  const feature1 = data[0];\n  const feature2 = data[1];\n  let sData = [];\n  for (let i = 0; i < results.length; i++) {\n    let col = {};\n    col.label = results[i].name;\n    col.backgroundColor = hexToRGB(scatterColors[i], 0.85);\n    col.data = [\n      {\n        x: results[i][feature1],\n        y: results[i][feature2],\n        r: 10\n      }\n    ];\n    col.hoverBackgroundColor = \"#007bff\";\n    sData.push(col);\n  }\n  return sData;\n};\n\nconst generateScatterChart = (element, data) => {\n  let mychart = document.getElementById(\"scatterChart\").getContext(\"2d\");\n\n  const bbdata = {\n    datasets: data\n  };\n  import(\"chart.js\").then(({default: Chart}) => {\n    new Chart(mychart, {\n      type: \"bubble\",\n      data: bbdata,\n      options: {\n        maintainAspectRatio: false,\n        scales: {\n          xAxes: [\n            {\n              display: true,\n              scaleLabel: {\n                labelString: Session.get(\"compareLabels\")[1],\n                display: true\n              },\n\n              ticks: {\n                beginAtZero: true\n              }\n            }\n          ],\n          yAxes: [\n            {\n              display: true,\n              scaleLabel: {\n                labelString: Session.get(\"compareLabels\")[0],\n                display: true\n              },\n              ticks: {\n                beginAtZero: true,\n                steps: 0.1,\n                stepValue: 0.05\n              }\n            }\n          ]\n        }\n      }\n    });\n  });\n};\n\nTemplate.sresults.events({\n  \"click #graphs\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrygraph\", {to: \"stylooption\"});\n    $(\"#graphs\").hide();\n    $(\"#table\").show();\n  },\n  \"click .saveResult\"(event) {\n    $(\"#exportModal\").modal({backdrop: \"static\", keyboard: false});\n  },\n  \"click #closeExportModal\"(event) {\n    document.getElementById(\"saveResultForm\").reset();\n    $(\"#exportModal\").modal(\"hide\");\n  },\n  \"click #exportResult\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const fileName = $(\"#fileName\").val();\n    const analysisResults = Session.get(\"styloresult\");\n    const data = analysisResults.map(renameObject);\n    const csvString = csv(data);\n    if (window.navigator.msSaveOrOpenBlob) {\n      const blob = new Blob([csvString]);\n      window.navigator.msSaveOrOpenBlob(blob, fileName + \".csv\");\n    } else {\n      let a = document.createElement(\"a\");\n      a.href = \"data:attachment/csv,\" + encodeURIComponent(csvString);\n      a.target = \"_blank\";\n      a.download = fileName + \".csv\";\n      document.body.appendChild(a);\n      a.click();\n    }\n    document.getElementById(\"saveResultForm\").reset();\n    $(\"#exportModal\").modal(\"hide\");\n  },\n  \"click #table\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrytable\", {to: \"stylooption\"});\n    $(\"#table\").hide();\n    $(\"#graphs\").show();\n  },\n  \"click #compare\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"compareFeatures\", {to: \"stylooption\"});\n    $(\"#table\").show();\n  },\n  \"click .newsearch\"(event, template) {\n    Session.set(\"styloresult\", null);\n    $(\"#stable\").empty();\n    Router.go(\"/stylometry\");\n  }\n});\n\nTemplate.compareFeatures.events({\n  \"submit #compareFeaturesForm\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    let selectedFeatures = [];\n    let frequencyLength = allF.length;\n    selectedFeatures.push(target.feature1.value);\n    selectedFeatures.push(target.feature2.value);\n    $(\"#compareSelect\").hide();\n    $(\"#compareView\").show();\n    let compareNames = [];\n    for (let b = 0; b < frequencyLength; b++) {\n      if (selectedFeatures.includes(allF[b].feature)) {\n        compareNames.push(allF[b].name);\n      }\n    }\n    Session.set(\"compareLabels\", compareNames);\n    let compareData = generateCompareData(selectedFeatures);\n    generateScatterChart(\"#scatterChart\", compareData);\n  }\n});\n\nTemplate.compareFeatures.onRendered(function() {\n  $(\".select2\").select2({\n    minimumResultsForSearch: 2,\n    width: \"100%\",\n    placeholder: \"Select Feature\",\n    matcher: function(term, text) {\n      return text.toUpperCase().indexOf(term.toUpperCase()) == 0;\n    }\n  });\n\n  $(\".select2[name=feature1]\").on(\"change\", function(e) {\n    const thisVal = $(this).val();\n    $(\".select2[name=feature2] option\").each(function() {\n      if (thisVal == $(this).attr(\"value\")) {\n        $(this).attr(\"disabled\", \"disabled\");\n      } else {\n        $(this).removeAttr(\"disabled\");\n      }\n    });\n  });\n\n  $(\".select2[name=feature2]\").on(\"change\", function(e) {\n    const thisVal = $(this).val();\n    $(\".select2[name=feature1] option\").each(function() {\n      if (thisVal == $(this).attr(\"value\")) {\n        $(this).attr(\"disabled\", \"disabled\");\n      } else {\n        $(this).removeAttr(\"disabled\");\n      }\n    });\n  });\n});\n\nTemplate.stylometrygraph.onRendered(function() {\n  $(\".toplevel\").fadeIn(\"slow\");\n  const featureArray = Session.get(\"features\");\n  const data = Session.get(\"styloresult\");\n  const cdata = data;\n  const f1label = cdata.map(function(x) {\n    return x.name;\n  });\n  const fl = allF.length;\n\n  const generateData = (feature) => {\n    const dydata = cdata.map(function(x) {\n      return x[feature];\n    });\n    let bdata = [];\n    for (let i = 0; i < cdata.length; i++) {\n      let col = {};\n      col.label = cdata[i].name;\n      col.data = [dydata[i]];\n      col.fill = true;\n      col.borderWidth = 2;\n      col.backgroundColor = \"rgba(112,44,57,0.4)\";\n      col.borderColor = \"#702c39\";\n      bdata.push(col);\n    }\n    return bdata;\n  };\n\n  let dynamicCharts = [];\n  for (let b = 0; b < fl; b++) {\n    let ch = {};\n    if (farray.includes(allF[b].feature)) {\n      ch.data = allF[b].feature;\n      ch.title = allF[b].name;\n      dynamicCharts.push(ch);\n    }\n  }\n\n  farray.forEach(function(x) {\n    generateBarChart(\"#\" + x, f1label, generateData(x));\n  });\n\n  function generateBarChart(element, labels, data) {\n    const mychart = $(element);\n\n    const bbdata = {\n      labels: labels,\n      datasets: data\n    };\n    import(\"chart.js\").then(({default: Chart}) => {\n      new Chart(mychart, {\n        type: \"bar\",\n        data: bbdata,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            xAxes: [\n              {\n                barPercentage: 0.4,\n                categoryPercentage: 1\n              }\n            ],\n            yAxes: [\n              {\n                ticks: {\n                  beginAtZero: true\n                }\n              }\n            ]\n          },\n          legend: {\n            display: false\n          },\n          tooltips: {\n            callbacks: {\n              title: function() {}\n            }\n          }\n        }\n      });\n    });\n  }\n});\n\nTemplate.stylometrytable.onRendered(function() {\n  $(\".toplevel\").fadeIn(\"slow\");\n  const farray = Session.get(\"features\");\n  let dynamicColumns = [\n    {data: \"name\", title: \"Corpus\"},\n    {data: \"words\", title: \"Words\"},\n    {data: \"characters\", title: \"Characters\"}\n  ];\n  const fl = allF.length;\n  for (let i = 0; i < fl; i++) {\n    let col = {};\n    if (farray.includes(allF[i].feature)) {\n      col.data = allF[i].feature;\n      col.title = allF[i].name;\n      dynamicColumns.push(col);\n    }\n  }\n  const data = Session.get(\"styloresult\");\n  const cdata = data;\n  let container = document.getElementById(\"stable\");\n  import(\"../hands.js\").then(({default: Handsontable}) => {\n    let hot_init = new Handsontable(container, {\n      data: data,\n      columns: dynamicColumns,\n      rowHeaders: true,\n      fixedColumnsLeft: 2,\n      columnSorting: true,\n      stretchH: \"all\"\n    });\n  });\n});\n\nTemplate.stylometrygraph.helpers({\n  nocharts() {\n    return htmlLabels();\n  }\n});\n\nTemplate.compareFeatures.helpers({\n  comparefeatures() {\n    let col = [];\n    let frequencyLength = allF.length;\n    let carray = Session.get(\"features\");\n    for (let i = 0; i < frequencyLength; i++) {\n      let select = {};\n      if (carray.includes(allF[i].feature)) {\n        select.value = allF[i].feature;\n        select.name = allF[i].name;\n        col.push(select);\n      }\n    }\n    return col;\n  }\n});\n"]},"sourceType":"script","hash":"77c5a92b6611d368ffa497d7a1600f124bd961f1"}
