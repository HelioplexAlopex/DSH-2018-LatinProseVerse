{"metadata":{},"options":{"plugins":[{"key":"base$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"base$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$4","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$9","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$10","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/jeff/stylometry/imports/ui/pages/stylometry.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/ui/pages/stylometry.js","filename":"/home/jeff/stylometry/imports/ui/pages/stylometry.js","passPerPreset":false,"envName":"development","cwd":"/home/jeff/stylometry","root":"/home/jeff/stylometry","presets":[],"generatorOpts":{"filename":"/home/jeff/stylometry/imports/ui/pages/stylometry.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/stylometry.js"}},"code":"module.watch(require(\"./stylometry.html\"));\nlet naturalSort;\nmodule.watch(require(\"./helpers.js\"), {\n  naturalSort(v) {\n    naturalSort = v;\n  }\n\n}, 0);\nmodule.watch(require(\"../select2.min.js\"));\nconst addclass = \"stylo_sel\";\nlet count = 0;\nlet aarray = [];\nlet tarray = [];\nlet barray = [];\nlet featureArray = [];\nconst tempArray = [\"p1\", \"p2\", \"p3\", \"p4\", \"p5\", \"n1\", \"n2\", \"n3\", \"s1\", \"s2\", \"s3\", \"s4\", \"s5\", \"s6\", \"s7\", \"s8\", \"s9\", \"m1\", \"m2\", \"m3\", \"m4\", \"m5\", \"m6\", \"m7\", \"c1\", \"c2\"];\nTemplate.stylometry.events({\n  \"click .stylo_sec\"(e) {\n    const id = e.currentTarget.id;\n    $(\"#\" + id).toggleClass(\"stylo_sel\");\n  },\n\n  \"change #selectAll\"(event) {\n    event.preventDefault();\n\n    if (document.getElementById(\"fauthor\").disabled) {\n      $(\"#fauthor\").prop(\"disabled\", false);\n      $(\".fauthor\").removeClass(\"disabled\");\n    } else {\n      $(\"#fauthor\").prop(\"disabled\", true);\n      $(\".fauthor\").addClass(\"disabled\");\n    }\n  },\n\n  \"click #graphs\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrygraph\", {\n      to: \"stylooption\"\n    });\n    $(\"#graphs\").hide();\n    $(\"#table\").show();\n  },\n\n  \"click #table\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrytable\", {\n      to: \"stylooption\"\n    });\n    $(\"#table\").hide();\n    $(\"#graphs\").show();\n  },\n\n  \"click .newsearch\"(event, template) {\n    Session.set(\"styloresult\", null);\n    $(\"#stable\").empty();\n    $(\".sresult\").hide();\n    $(\".ssearch\").show();\n  },\n\n  \"click .addmore\"(event, template) {\n    var ul = document.getElementById(\"dynamic-list\");\n    const candidate = document.getElementById(\"fauthor\");\n    const candidate2 = document.getElementById(\"ftext\");\n    const candidate3 = document.getElementById(\"fbook\");\n    count += 1;\n    tarray.push(candidate2.value);\n    aarray.push(candidate.value);\n    barray.push(candidate3.value);\n    $(\"#stylocorpus\").append('<tr class=\"list\"><td data-name=' + candidate.value + \">\" + candidate.value + \"</td><td data-name=\" + candidate2.value + \">\" + candidate2.value + \"</td><td data-name=\" + candidate3.value + \">\" + candidate3.value + '</td><td class=\"text-center\"><button type=\"button\" class=\"btn btn-info remove\" id=\"delete\"><i class=\"fa fa-trash\"></i> Remove</button></td></tr>');\n    $(\"#fauthor\").select2(\"data\", null);\n    $(\"#fbook\").select2(\"data\", null);\n    $(\"#ftext\").select2(\"data\", null);\n    $(\".ftext\").addClass(\"disabled\");\n    $(\"#ftext\").prop(\"disabled\", true);\n    $(\".fbook\").addClass(\"disabled\");\n    $(\"#fbook\").prop(\"disabled\", true);\n  },\n\n  \"submit #fsearch\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const author = $(\"#fauthor :selected\").val();\n    const book = $(\"#fbook :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    let farrays = tempArray;\n    farrays.push($(\"#pronouns\").val());\n    farrays.push($(\"#adjectives\").val());\n    farrays.push($(\"#conjunctions\").val());\n    farrays.push($(\"#subordinate\").val());\n    farrays.push($(\"#miscellaneous\").val());\n    let farray = [].concat.apply([], farrays);\n    Session.set(\"features\", farray);\n    const data = {\n      author: aarray,\n      text: tarray,\n      book: barray\n    };\n    const features = {\n      feature: farray\n    };\n    $(\".ssearch\").hide();\n    $(\".sloading\").show();\n    Meteor.call(\"stylometryf\", data, features, function (error, result) {\n      if (error) {\n        Bert.alert(\"Error, please re-try!\", \"danger\", \"growl-top-right\");\n        console.log(error);\n        $(\".sloading\").hide();\n        $(\".ssearch\").show();\n      } else {\n        Session.set(\"styloresult\", result);\n        Router.go(\"/sresults\");\n      }\n    });\n  },\n\n  \"click .remove\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const rname = $(target).data(\"name\");\n    const sname = $(target).data(\"sub\");\n    const a = narray.indexOf(rname);\n    const t = narray.indexOf(sname);\n    $(target).closest(\"tr\").remove(this.id);\n    aarray.splice(a, 1);\n    tarray.splice(t, 1);\n    barray.splice(b, 1);\n    count -= 1;\n  }\n\n});\nTemplate.stylometry.onRendered(function () {\n  $(\".select2\").select2({\n    minimumResultsForSearch: 2,\n    width: \"100%\",\n    matcher: function (term, text) {\n      return text.toUpperCase().indexOf(term.toUpperCase()) == 0;\n    }\n  });\n  aarray = [];\n  tarray = [];\n  barray = [];\n  $(\"#arows\").on(\"click\", \".delete\", function () {\n    $(this).closest(\"tr\").remove();\n  });\n  $(\"#fauthor\").on(\"change\", function (e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    Meteor.call(\"texts\", author, function (error, result) {\n      Session.set(\"texts\", result);\n      $(\"#ftext\").prop(\"disabled\", false);\n      $(\".ftext\").removeClass(\"disabled\");\n    });\n  });\n  $(\"#ftext\").on(\"change\", function (e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    Meteor.call(\"books\", author, text, function (error, result) {\n      sort = result.sort(naturalSort);\n      Session.set(\"books\", sort);\n      $(\"#fbook\").prop(\"disabled\", false);\n      $(\".fbook\").removeClass(\"disabled\");\n    });\n  });\n});\nTemplate.stylometry.helpers({\n  authors() {\n    return Session.get(\"authors\");\n  },\n\n  texts() {\n    return Session.get(\"texts\");\n  },\n\n  books() {\n    return Session.get(\"books\");\n  },\n\n  removepart(a1) {\n    if (a1) return a1.replace(\"Part \", \"\");\n  },\n\n  sigfig(a1) {\n    if (a1) return a1.toFixed(3);\n  }\n\n});","map":{"version":3,"sources":["imports/ui/pages/stylometry.js"],"names":["module","watch","require","naturalSort","v","addclass","count","aarray","tarray","barray","featureArray","tempArray","Template","stylometry","events","e","id","currentTarget","$","toggleClass","event","preventDefault","document","getElementById","disabled","prop","removeClass","addClass","controller","Iron","render","to","hide","show","template","Session","set","empty","ul","candidate","candidate2","candidate3","push","value","append","select2","target","author","val","book","text","farrays","farray","concat","apply","data","features","feature","Meteor","call","error","result","Bert","alert","console","log","Router","go","rname","sname","a","narray","indexOf","t","closest","remove","splice","b","onRendered","minimumResultsForSearch","width","matcher","term","toUpperCase","on","sort","helpers","authors","get","texts","books","removepart","a1","replace","sigfig","toFixed"],"mappings":"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","sourcesContent":["import \"./stylometry.html\";\nimport {naturalSort} from \"./helpers.js\";\nimport \"../select2.min.js\";\n\nconst addclass = \"stylo_sel\";\n\nlet count = 0;\nlet aarray = [];\nlet tarray = [];\nlet barray = [];\nlet featureArray = [];\n\nconst tempArray = [\n  \"p1\",\n  \"p2\",\n  \"p3\",\n  \"p4\",\n  \"p5\",\n  \"n1\",\n  \"n2\",\n  \"n3\",\n  \"s1\",\n  \"s2\",\n  \"s3\",\n  \"s4\",\n  \"s5\",\n  \"s6\",\n  \"s7\",\n  \"s8\",\n  \"s9\",\n  \"m1\",\n  \"m2\",\n  \"m3\",\n  \"m4\",\n  \"m5\",\n  \"m6\",\n  \"m7\",\n  \"c1\",\n  \"c2\"\n];\n\nTemplate.stylometry.events({\n  \"click .stylo_sec\"(e) {\n    const id = e.currentTarget.id;\n    $(\"#\" + id).toggleClass(\"stylo_sel\");\n  },\n  \"change #selectAll\"(event) {\n    event.preventDefault();\n    if (document.getElementById(\"fauthor\").disabled) {\n      $(\"#fauthor\").prop(\"disabled\", false);\n      $(\".fauthor\").removeClass(\"disabled\");\n    } else {\n      $(\"#fauthor\").prop(\"disabled\", true);\n      $(\".fauthor\").addClass(\"disabled\");\n    }\n  },\n  \"click #graphs\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrygraph\", {to: \"stylooption\"});\n    $(\"#graphs\").hide();\n    $(\"#table\").show();\n  },\n  \"click #table\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrytable\", {to: \"stylooption\"});\n    $(\"#table\").hide();\n    $(\"#graphs\").show();\n  },\n  \"click .newsearch\"(event, template) {\n    Session.set(\"styloresult\", null);\n    $(\"#stable\").empty();\n    $(\".sresult\").hide();\n    $(\".ssearch\").show();\n  },\n  \"click .addmore\"(event, template) {\n    var ul = document.getElementById(\"dynamic-list\");\n    const candidate = document.getElementById(\"fauthor\");\n    const candidate2 = document.getElementById(\"ftext\");\n    const candidate3 = document.getElementById(\"fbook\");\n    count += 1;\n    tarray.push(candidate2.value);\n    aarray.push(candidate.value);\n    barray.push(candidate3.value);\n    $(\"#stylocorpus\").append(\n      '<tr class=\"list\"><td data-name=' +\n        candidate.value +\n        \">\" +\n        candidate.value +\n        \"</td><td data-name=\" +\n        candidate2.value +\n        \">\" +\n        candidate2.value +\n        \"</td><td data-name=\" +\n        candidate3.value +\n        \">\" +\n        candidate3.value +\n        '</td><td class=\"text-center\"><button type=\"button\" class=\"btn btn-info remove\" id=\"delete\"><i class=\"fa fa-trash\"></i> Remove</button></td></tr>'\n    );\n    $(\"#fauthor\").select2(\"data\", null);\n    $(\"#fbook\").select2(\"data\", null);\n    $(\"#ftext\").select2(\"data\", null);\n    $(\".ftext\").addClass(\"disabled\");\n    $(\"#ftext\").prop(\"disabled\", true);\n    $(\".fbook\").addClass(\"disabled\");\n    $(\"#fbook\").prop(\"disabled\", true);\n  },\n  \"submit #fsearch\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const author = $(\"#fauthor :selected\").val();\n    const book = $(\"#fbook :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    let farrays = tempArray;\n    farrays.push($(\"#pronouns\").val());\n    farrays.push($(\"#adjectives\").val());\n    farrays.push($(\"#conjunctions\").val());\n    farrays.push($(\"#subordinate\").val());\n    farrays.push($(\"#miscellaneous\").val());\n    let farray = [].concat.apply([], farrays);\n    Session.set(\"features\", farray);\n    const data = {\n      author: aarray,\n      text: tarray,\n      book: barray\n    };\n    const features = {\n      feature: farray\n    };\n    $(\".ssearch\").hide();\n    $(\".sloading\").show();\n    Meteor.call(\"stylometryf\", data, features, function(error, result) {\n      if (error) {\n        Bert.alert(\"Error, please re-try!\", \"danger\", \"growl-top-right\");\n        console.log(error);\n        $(\".sloading\").hide();\n        $(\".ssearch\").show();\n      } else {\n        Session.set(\"styloresult\", result);\n        Router.go(\"/sresults\");\n      }\n    });\n  },\n  \"click .remove\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const rname = $(target).data(\"name\");\n    const sname = $(target).data(\"sub\");\n    const a = narray.indexOf(rname);\n    const t = narray.indexOf(sname);\n    $(target)\n      .closest(\"tr\")\n      .remove(this.id);\n    aarray.splice(a, 1);\n    tarray.splice(t, 1);\n    barray.splice(b, 1);\n    count -= 1;\n  }\n});\n\nTemplate.stylometry.onRendered(function() {\n  $(\".select2\").select2({\n    minimumResultsForSearch: 2,\n    width: \"100%\",\n    matcher: function(term, text) {\n      return text.toUpperCase().indexOf(term.toUpperCase()) == 0;\n    }\n  });\n\n  aarray = [];\n  tarray = [];\n  barray = [];\n  $(\"#arows\").on(\"click\", \".delete\", function() {\n    $(this)\n      .closest(\"tr\")\n      .remove();\n  });\n\n  $(\"#fauthor\").on(\"change\", function(e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    Meteor.call(\"texts\", author, function(error, result) {\n      Session.set(\"texts\", result);\n      $(\"#ftext\").prop(\"disabled\", false);\n      $(\".ftext\").removeClass(\"disabled\");\n    });\n  });\n\n  $(\"#ftext\").on(\"change\", function(e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    Meteor.call(\"books\", author, text, function(error, result) {\n      sort = result.sort(naturalSort);\n      Session.set(\"books\", sort);\n      $(\"#fbook\").prop(\"disabled\", false);\n      $(\".fbook\").removeClass(\"disabled\");\n    });\n  });\n});\n\nTemplate.stylometry.helpers({\n  authors() {\n    return Session.get(\"authors\");\n  },\n  texts() {\n    return Session.get(\"texts\");\n  },\n  books() {\n    return Session.get(\"books\");\n  },\n  removepart(a1) {\n    if (a1) return a1.replace(\"Part \", \"\");\n  },\n  sigfig(a1) {\n    if (a1) return a1.toFixed(3);\n  }\n});\n"]},"sourceType":"script","hash":"20f086ed24ac5a33f889825d6b2f859b454935db"}
