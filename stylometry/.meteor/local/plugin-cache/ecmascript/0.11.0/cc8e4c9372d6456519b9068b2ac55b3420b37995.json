{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$4","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$6","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$7","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/jeff/stylometry/imports/ui/pages/stylometry.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/ui/pages/stylometry.js","filename":"/home/jeff/stylometry/imports/ui/pages/stylometry.js","passPerPreset":false,"envName":"development","cwd":"/home/jeff/stylometry","root":"/home/jeff/stylometry","generatorOpts":{"filename":"/home/jeff/stylometry/imports/ui/pages/stylometry.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/stylometry.js"}},"code":"module.watch(require(\"./stylometry.html\"));\nlet naturalSort;\nmodule.watch(require(\"./helpers.js\"), {\n  naturalSort(v) {\n    naturalSort = v;\n  }\n\n}, 0);\nmodule.watch(require(\"../select2.min.js\"));\nconst addclass = \"stylo_sel\";\nlet count = 0;\nlet aarray = [];\nlet tarray = [];\nlet barray = [];\nlet featureArray = [];\nconst tempArray = [\"p1\", \"p2\", \"p3\", \"p4\", \"p5\", \"n1\", \"n2\", \"n3\", \"s1\", \"s2\", \"s3\", \"s4\", \"s5\", \"s6\", \"s7\", \"s8\", \"s9\", \"m1\", \"m2\", \"m3\", \"m4\", \"m5\", \"m6\", \"m7\", \"m8\", \"c1\", \"c2\"];\nTemplate.stylometry.events({\n  \"click .stylo_sec\"(e) {\n    const id = e.currentTarget.id;\n    $(\"#\" + id).toggleClass(\"stylo_sel\");\n  },\n\n  \"click #graphs\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrygraph\", {\n      to: \"stylooption\"\n    });\n    $(\"#graphs\").hide();\n    $(\"#table\").show();\n  },\n\n  \"click #table\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrytable\", {\n      to: \"stylooption\"\n    });\n    $(\"#table\").hide();\n    $(\"#graphs\").show();\n  },\n\n  \"click .newsearch\"(event, template) {\n    Session.set(\"styloresult\", null);\n    $(\"#stable\").empty();\n    $(\".sresult\").hide();\n    $(\".ssearch\").show();\n  },\n\n  \"click .addmore\"(event, template) {\n    var ul = document.getElementById(\"dynamic-list\");\n    const candidate = document.getElementById(\"fauthor\");\n    const candidate2 = document.getElementById(\"ftext\");\n    const candidate3 = document.getElementById(\"fbook\");\n    count += 1;\n    tarray.push(candidate2.value);\n    aarray.push(candidate.value);\n    barray.push(candidate3.value);\n    $(\"#stylocorpus\").append('<tr class=\"list\"><td data-name=' + candidate.value + \">\" + candidate.value + \"</td><td data-name=\" + candidate2.value + \">\" + candidate2.value + \"</td><td data-name=\" + candidate3.value + \">\" + candidate3.value + '</td><td class=\"text-center\"><button type=\"button\" class=\"btn btn-info remove\" id=\"delete\"><i class=\"fa fa-trash\"></i> Remove</button></td></tr>');\n    $(\"#fauthor\").select2(\"data\", null);\n    $(\"#fbook\").select2(\"data\", null);\n    $(\"#ftext\").select2(\"data\", null);\n    $(\".ftext\").addClass(\"disabled\");\n    $(\"#ftext\").prop(\"disabled\", true);\n    $(\".fbook\").addClass(\"disabled\");\n    $(\"#fbook\").prop(\"disabled\", true);\n  },\n\n  \"submit #fsearch\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const author = $(\"#fauthor :selected\").val();\n    const book = $(\"#fbook :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    let farrays = tempArray;\n    farrays.push($(\"#pronouns\").val());\n    farrays.push($(\"#adjectives\").val());\n    farrays.push($(\"#conjunctions\").val());\n    farrays.push($(\"#subordinate\").val());\n    farrays.push($(\"#miscellaneous\").val());\n    let farray = [].concat.apply([], farrays);\n    Session.set(\"features\", farray);\n    const filumdata = {\n      author: aarray,\n      text: tarray,\n      book: barray\n    };\n    const features = {\n      feature: farray\n    };\n    $(\".ssearch\").hide();\n    $(\".sloading\").show();\n    Meteor.call(\"stylometryf\", filumdata, features, function (error, result) {\n      if (error) {\n        Bert.alert(\"Error, please re-try!\", \"danger\", \"growl-top-right\");\n        console.log(error);\n        $(\".sloading\").hide();\n        $(\".ssearch\").show();\n      } else {\n        Session.set(\"styloresult\", result);\n        Router.go(\"/sresults\");\n      }\n    });\n  },\n\n  \"click .remove\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const rname = $(target).data(\"name\");\n    const sname = $(target).data(\"sub\");\n    const a = narray.indexOf(rname);\n    const t = narray.indexOf(sname);\n    $(target).closest(\"tr\").remove(this.id);\n    aarray.splice(a, 1);\n    tarray.splice(t, 1);\n    barray.splice(b, 1);\n    count -= 1;\n  }\n\n});\nTemplate.stylometry.onRendered(function () {\n  $(\".select2\").select2({\n    minimumResultsForSearch: 2,\n    width: \"100%\",\n    matcher: function (term, text) {\n      return text.toUpperCase().indexOf(term.toUpperCase()) == 0;\n    }\n  });\n  aarray = [];\n  tarray = [];\n  barray = [];\n  $(\"#arows\").on(\"click\", \".delete\", function () {\n    $(this).closest(\"tr\").remove();\n  });\n  $(\"#fauthor\").on(\"change\", function (e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    Meteor.call(\"filumtexts\", author, function (error, result) {\n      Session.set(\"filumtexts\", result);\n      $(\"#ftext\").prop(\"disabled\", false);\n      $(\".ftext\").removeClass(\"disabled\");\n    });\n  });\n  $(\"#ftext\").on(\"change\", function (e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    Meteor.call(\"filumbooks\", author, text, function (error, result) {\n      sort = result.sort(naturalSort);\n      Session.set(\"filumbooks\", sort);\n      $(\"#fbook\").prop(\"disabled\", false);\n      $(\".fbook\").removeClass(\"disabled\");\n    });\n  });\n});\nTemplate.stylometry.helpers({\n  authors() {\n    return Session.get(\"filumauthors\");\n  },\n\n  texts() {\n    return Session.get(\"filumtexts\");\n  },\n\n  books() {\n    return Session.get(\"filumbooks\");\n  },\n\n  removepart(a1) {\n    if (a1) return a1.replace(\"Part \", \"\");\n  },\n\n  sigfig(a1) {\n    if (a1) return a1.toFixed(3);\n  }\n\n});","map":{"version":3,"sources":["imports/ui/pages/stylometry.js"],"names":["module","watch","require","naturalSort","v","addclass","count","aarray","tarray","barray","featureArray","tempArray","Template","stylometry","events","e","id","currentTarget","$","toggleClass","event","preventDefault","controller","Iron","render","to","hide","show","template","Session","set","empty","ul","document","getElementById","candidate","candidate2","candidate3","push","value","append","select2","addClass","prop","target","author","val","book","text","farrays","farray","concat","apply","filumdata","features","feature","Meteor","call","error","result","Bert","alert","console","log","Router","go","rname","data","sname","a","narray","indexOf","t","closest","remove","splice","b","onRendered","minimumResultsForSearch","width","matcher","term","toUpperCase","on","removeClass","sort","helpers","authors","get","texts","books","removepart","a1","replace","sigfig","toFixed"],"mappings":"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","sourcesContent":["import \"./stylometry.html\";\nimport {naturalSort} from \"./helpers.js\";\nimport \"../select2.min.js\";\n\nconst addclass = \"stylo_sel\";\n\nlet count = 0;\nlet aarray = [];\nlet tarray = [];\nlet barray = [];\nlet featureArray = [];\n\nconst tempArray = [\n  \"p1\",\n  \"p2\",\n  \"p3\",\n  \"p4\",\n  \"p5\",\n  \"n1\",\n  \"n2\",\n  \"n3\",\n  \"s1\",\n  \"s2\",\n  \"s3\",\n  \"s4\",\n  \"s5\",\n  \"s6\",\n  \"s7\",\n  \"s8\",\n  \"s9\",\n  \"m1\",\n  \"m2\",\n  \"m3\",\n  \"m4\",\n  \"m5\",\n  \"m6\",\n  \"m7\",\n  \"m8\",\n  \"c1\",\n  \"c2\"\n];\n\nTemplate.stylometry.events({\n  \"click .stylo_sec\"(e) {\n    const id = e.currentTarget.id;\n    $(\"#\" + id).toggleClass(\"stylo_sel\");\n  },\n  \"click #graphs\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrygraph\", {to: \"stylooption\"});\n    $(\"#graphs\").hide();\n    $(\"#table\").show();\n  },\n  \"click #table\"(event) {\n    event.preventDefault();\n    const controller = Iron.controller();\n    controller.render(\"stylometrytable\", {to: \"stylooption\"});\n    $(\"#table\").hide();\n    $(\"#graphs\").show();\n  },\n  \"click .newsearch\"(event, template) {\n    Session.set(\"styloresult\", null);\n    $(\"#stable\").empty();\n    $(\".sresult\").hide();\n    $(\".ssearch\").show();\n  },\n  \"click .addmore\"(event, template) {\n    var ul = document.getElementById(\"dynamic-list\");\n    const candidate = document.getElementById(\"fauthor\");\n    const candidate2 = document.getElementById(\"ftext\");\n    const candidate3 = document.getElementById(\"fbook\");\n    count += 1;\n    tarray.push(candidate2.value);\n    aarray.push(candidate.value);\n    barray.push(candidate3.value);\n    $(\"#stylocorpus\").append(\n      '<tr class=\"list\"><td data-name=' +\n        candidate.value +\n        \">\" +\n        candidate.value +\n        \"</td><td data-name=\" +\n        candidate2.value +\n        \">\" +\n        candidate2.value +\n        \"</td><td data-name=\" +\n        candidate3.value +\n        \">\" +\n        candidate3.value +\n        '</td><td class=\"text-center\"><button type=\"button\" class=\"btn btn-info remove\" id=\"delete\"><i class=\"fa fa-trash\"></i> Remove</button></td></tr>'\n    );\n    $(\"#fauthor\").select2(\"data\", null);\n    $(\"#fbook\").select2(\"data\", null);\n    $(\"#ftext\").select2(\"data\", null);\n    $(\".ftext\").addClass(\"disabled\");\n    $(\"#ftext\").prop(\"disabled\", true);\n    $(\".fbook\").addClass(\"disabled\");\n    $(\"#fbook\").prop(\"disabled\", true);\n  },\n  \"submit #fsearch\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const author = $(\"#fauthor :selected\").val();\n    const book = $(\"#fbook :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    let farrays = tempArray;\n    farrays.push($(\"#pronouns\").val());\n    farrays.push($(\"#adjectives\").val());\n    farrays.push($(\"#conjunctions\").val());\n    farrays.push($(\"#subordinate\").val());\n    farrays.push($(\"#miscellaneous\").val());\n    let farray = [].concat.apply([], farrays);\n    Session.set(\"features\", farray);\n    const filumdata = {\n      author: aarray,\n      text: tarray,\n      book: barray\n    };\n    const features = {\n      feature: farray\n    };\n    $(\".ssearch\").hide();\n    $(\".sloading\").show();\n    Meteor.call(\"stylometryf\", filumdata, features, function(error, result) {\n      if (error) {\n        Bert.alert(\"Error, please re-try!\", \"danger\", \"growl-top-right\");\n        console.log(error);\n        $(\".sloading\").hide();\n        $(\".ssearch\").show();\n      } else {\n        Session.set(\"styloresult\", result);\n        Router.go(\"/sresults\");\n      }\n    });\n  },\n  \"click .remove\"(event, template) {\n    event.preventDefault();\n    const target = event.target;\n    const rname = $(target).data(\"name\");\n    const sname = $(target).data(\"sub\");\n    const a = narray.indexOf(rname);\n    const t = narray.indexOf(sname);\n    $(target)\n      .closest(\"tr\")\n      .remove(this.id);\n    aarray.splice(a, 1);\n    tarray.splice(t, 1);\n    barray.splice(b, 1);\n    count -= 1;\n  }\n});\n\nTemplate.stylometry.onRendered(function() {\n  $(\".select2\").select2({\n    minimumResultsForSearch: 2,\n    width: \"100%\",\n    matcher: function(term, text) {\n      return text.toUpperCase().indexOf(term.toUpperCase()) == 0;\n    }\n  });\n\n  aarray = [];\n  tarray = [];\n  barray = [];\n  $(\"#arows\").on(\"click\", \".delete\", function() {\n    $(this)\n      .closest(\"tr\")\n      .remove();\n  });\n\n  $(\"#fauthor\").on(\"change\", function(e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    Meteor.call(\"filumtexts\", author, function(error, result) {\n      Session.set(\"filumtexts\", result);\n      $(\"#ftext\").prop(\"disabled\", false);\n      $(\".ftext\").removeClass(\"disabled\");\n    });\n  });\n\n  $(\"#ftext\").on(\"change\", function(e) {\n    const target = e.target;\n    const author = $(\"#fauthor :selected\").val();\n    const text = $(\"#ftext :selected\").val();\n    Meteor.call(\"filumbooks\", author, text, function(error, result) {\n      sort = result.sort(naturalSort);\n      Session.set(\"filumbooks\", sort);\n      $(\"#fbook\").prop(\"disabled\", false);\n      $(\".fbook\").removeClass(\"disabled\");\n    });\n  });\n});\n\nTemplate.stylometry.helpers({\n  authors() {\n    return Session.get(\"filumauthors\");\n  },\n  texts() {\n    return Session.get(\"filumtexts\");\n  },\n  books() {\n    return Session.get(\"filumbooks\");\n  },\n  removepart(a1) {\n    if (a1) return a1.replace(\"Part \", \"\");\n  },\n  sigfig(a1) {\n    if (a1) return a1.toFixed(3);\n  }\n});\n"]},"sourceType":"script","hash":"cc8e4c9372d6456519b9068b2ac55b3420b37995"}
